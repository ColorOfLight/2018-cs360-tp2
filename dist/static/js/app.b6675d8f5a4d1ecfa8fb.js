webpackJsonp([1],{"1/oy":function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},JW6U:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),r=s("e6fC"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},i,!1,function(t){s("wf/s")},null,null).exports,o=s("/ocq"),c=s("mtWM"),u=s.n(c),l=s("lbHh"),d=s.n(l);u.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",u.a.defaults.headers.delete["Content-Type"]="application/x-www-form-urlencoded";var v=u.a.create({baseURL:"http://13.125.127.34:3000",headers:{}}),p=s("mw3O"),f=s.n(p),h={data:function(){return{form:{user_id:"",password:"",username:""}}},methods:{login:function(){var t=this;if(this.form.user_id&&this.form.password){var e={user_id:this.form.user_id,password:this.form.password};v.post("/user/login",f.a.stringify(e)).then(function(e){d.a.set("user_id",e.data.data.user_id),t.$router.push({name:"Search"})}).catch(function(t){alert("Please check User ID or Password.")})}else alert("Please fill all of inputs.")},signUp:function(){var t=this;if(this.form.user_id&&this.form.password&&this.form.username){var e={id:this.form.user_id,password:this.form.password,name:this.form.username};v.post("/user",f.a.stringify(e)).then(function(e){d.a.set("user_id",e.data.data.user_id),t.$router.push({name:"Search"})})}else alert("Please fill all of inputs.")},moveToSignUp:function(){this.$router.push({name:"SignUp"})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container page-login"},[s("div",{staticClass:"row justify-content-center align-items-center"},[s("div",{staticClass:"col fixed-width-600"},[s("b-card",{staticClass:"login-card"},[s("div",{staticClass:"card-title"},[t._v("TEAM COOK")]),s("b-container",{staticClass:"input-container",attrs:{fluid:"fluid"}},["SignUp"===t.$route.name?s("b-row",[s("b-col",{staticClass:"col",attrs:{sm:"3"}},[s("label",[t._v("Username")])]),s("b-col",{staticClass:"col",attrs:{sm:"9"}},[s("b-form-input",{attrs:{type:"text"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1)],1):t._e(),s("b-row",[s("b-col",{staticClass:"col",attrs:{sm:"3"}},[s("label",[t._v("User ID")])]),s("b-col",{staticClass:"col",attrs:{sm:"9"}},[s("b-form-input",{attrs:{type:"text"},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}})],1)],1),s("b-row",[s("b-col",{staticClass:"col",attrs:{sm:"3"}},[s("label",[t._v("Password")])]),s("b-col",{staticClass:"col",attrs:{sm:"9"}},[s("b-form-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1),"SignUp"===t.$route.name?s("div",{staticClass:"btn-container"},[s("b-button",{staticClass:"btn-login",attrs:{variant:"secondary"},on:{click:t.signUp}},[t._v("Sign up")])],1):s("div",{staticClass:"btn-container"},[s("b-button",{staticClass:"btn-signup",attrs:{variant:"outline-secondary"},on:{click:t.moveToSignUp}},[t._v("Sign up")]),s("span",{staticClass:"interval"},[t._v("or")]),s("b-button",{staticClass:"btn-login",attrs:{variant:"secondary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)])])},staticRenderFns:[]};var g=s("VU/8")(h,m,!1,function(t){s("JW6U")},"data-v-1f1663b6",null).exports,_=s("Xxa5"),b=s.n(_),y=s("//Fk"),w=s.n(y),C=s("exGp"),$=s.n(C),k={props:["username"],created:function(){this.$route.query.keyword?this.term=this.$route.query.keyword:this.$route.query.tag&&(this.term="#"+this.$route.query.tag)},data:function(){return{isDropdownOpen:!1,term:""}},methods:{logout:function(){d.a.remove("user_id"),this.$router.push({name:"Login"})},search:function(t){t===this.term&&(this.term?0===this.term.indexOf("#")?this.$router.replace({name:"Search",query:{tag:this.term.substring(1)}}):this.$router.replace({name:"Search",query:{keyword:this.term}}):this.$router.replace({name:"Search"}))}},watch:{term:function(){var t=this,e=this.term;setTimeout(function(){t.search(e)},1e3)}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar"},[s("div",{staticClass:"navbar-wrapper"},[s("div",{staticClass:"navbar-title"},[t._v("TEAM COOK")]),s("div",{staticClass:"navbar-search-container"},[s("b-form-input",{staticClass:"search-input",attrs:{type:"text",placeholder:"Chicken, Pizza, ... or #Delicious, #Large, ..."},model:{value:t.term,callback:function(e){t.term=e},expression:"term"}}),s("i",{staticClass:"material-icons search-icon"},[t._v("search")])],1),s("div",{staticClass:"navbar-account-container"},[s("div",{staticClass:"navbar-account",on:{click:function(){return t.isDropdownOpen=!t.isDropdownOpen}}},[t._v(t._s(t.username)),s("i",{staticClass:"material-icons"},[t._v("arrow_drop_down")])]),t.isDropdownOpen?s("div",{staticClass:"navbar-dropdown-content"},[s("b-card",[s("div",{staticClass:"dropdown-list",on:{click:t.logout}},[t._v("Logout")])])],1):t._e()])])])},staticRenderFns:[]};var S={created:function(){var t=this;return $()(b.a.mark(function e(){var s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.a.get("user_id")){e.next=10;break}return s=[t.$store.dispatch("getUser",d.a.get("user_id")),t.$store.dispatch("getFavorites",d.a.get("user_id"))],t.$route.query.keyword?s.push(t.$store.dispatch("getStoreListKeyword",t.$route.query.keyword)):t.$route.query.tag?s.push(t.$store.dispatch("getStoreListTag",t.$route.query.tag)):t.$store.commit("setState",{storeList:null}),e.next=5,w.a.all(s);case 5:t.username=t.$store.state.username,t.$route.query.favorites&&t.$store.commit("setState",{storeList:t.$store.state.favorites}),t.storeList=t.$store.state.storeList,e.next=11;break;case 10:t.$router.push({name:"Login"});case 11:case"end":return e.stop()}},e,t)}))()},components:{navbar:s("VU/8")(k,x,!1,function(t){s("tk6D")},"data-v-1d3330b0",null).exports},data:function(){return{username:"",storeList:null,storeInDetail:null,favorites:null}},methods:{getLastComment:function(t){return t&&t.length>0?t[0].content:"-"},getRatingPoint:function(t){return null===t?"-":Math.round(t)+" p"},getRatingText:function(t){return null===t?"-":t<=20?"Very negative":t>20&&t<=40?"Negative":t>40&&t<=60?"Mixed":t>60&&t<=80?"Positive":t>80?"Very Positive":void 0},replaceTag:function(t){this.$router.replace({name:"Search",query:{tag:t}})},showStoreDetail:function(t){this.storeInDetail=t},isStoreFavorited:function(t){if(!this.favorites||this.favorites.length<1)return!1;for(var e=0;e<this.favorites.length;e++)if(this.favorites[e].store_id===t)return!0;return!1},toggleFavorite:function(t){var e={store_id:t,user_id:d.a.get("user_id")};this.isStoreFavorited(t)?this.$store.dispatch("deleteFavorite",e):this.$store.dispatch("addFavorite",e)}},watch:{"$route.query":{handler:function(){var t=$()(b.a.mark(function t(){var e;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],this.$route.query.keyword?e.push(this.$store.dispatch("getStoreListKeyword",this.$route.query.keyword)):this.$route.query.tag?e.push(this.$store.dispatch("getStoreListTag",this.$route.query.tag)):this.$route.query.favorites?(this.$store.commit("setState",{storeList:this.$store.state.favorites}),this.storeList=this.$store.state.storeList,this.storeInDetail=null):this.$store.commit("setState",{storeList:null}),t.next=4,w.a.all(e);case 4:this.storeList=this.$store.state.storeList;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deep:!0},"$store.state.favorites":function(t){this.favorites=t}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-search"},[s("navbar",{staticClass:"navbar",attrs:{username:t.username}}),s("div",{staticClass:"search-content-container"},[s("div",{staticClass:"side-menu-wrapper"},[s("div",{staticClass:"account-name"},[t._v(t._s(t.username))]),s("b-card",{staticClass:"side-menu-card",on:{click:function(e){t.$router.replace({name:"Search",query:{favorites:!0}})}}},[s("div",{staticClass:"card-text"},[s("i",{staticClass:"material-icons icon-favorite"},[t._v("star")]),t._v("Favorites")])])],1),s("div",{staticClass:"container content-container"},[s("div",{staticClass:"row"},[t.storeList&&t.storeList.length>0?s("div",{staticClass:"col-6"},t._l(t.storeList,function(e){return s("b-card",{key:e.store_id,staticClass:"search-store-card",attrs:{"no-body":"no-body"},on:{click:function(s){t.showStoreDetail(e)}}},[s("b-card-body",[s("i",{staticClass:"material-icons icon-favorite",class:{active:t.isStoreFavorited(e.store_id)},on:{click:function(s){s.stopPropagation(),t.toggleFavorite(e.store_id)}}},[t._v("star")]),s("div",{staticClass:"search-title-container"},[s("div",{staticClass:"title"},[t._v(t._s(e.name))]),s("div",{staticClass:"tag-wrapper"},t._l(e.tag_list.slice(0,3),function(e){return s("div",{key:e,staticClass:"tag",on:{click:function(s){s.stopPropagation(),t.replaceTag(e)}}},[t._v(t._s("#"+e))])}))]),s("div",{staticClass:"search-rating-wrapper"},[s("div",{staticClass:"rating-score"},[t._v(t._s(t.getRatingPoint(e.score)))]),s("div",{staticClass:"rating-text"},[t._v(t._s(t.getRatingText(e.score)))])])]),s("b-card-footer",[s("span",{staticClass:"recent"},[t._v("Recent")]),s("div",{staticClass:"text"},[t._v(t._s(t.getLastComment(e.review_list)))])])],1)})):s("div",{staticClass:"col-6"},[s("b-card",{staticClass:"empty-card",attrs:{"no-body":"no-body"}},[s("b-card-body",[t._v("Please search with keywords or tags.")])],1)],1),s("div",{staticClass:"col-6"},[t.storeInDetail?s("b-card",{staticClass:"store-detail-card",attrs:{"no-body":"no-body"}},[s("b-card-body",{staticClass:"detail-title-body"},[s("i",{staticClass:"material-icons icon-favorite",class:{active:t.isStoreFavorited(t.storeInDetail.store_id)},on:{click:function(e){e.stopPropagation(),t.toggleFavorite(t.storeInDetail.store_id)}}},[t._v("star")]),s("div",{staticClass:"title"},[t._v(t._s(t.storeInDetail.name))])]),s("b-card-body",{staticClass:"detail-content-body"},[s("b-card",{attrs:{"no-body":"no-body"}},[s("b-card-body",{staticClass:"ratings-body"},[s("div",{staticClass:"title"},[t._v("Ratings")]),s("div",{staticClass:"ratings-content-wrapper"},[s("div",{staticClass:"rating"},[t._v(t._s(t.getRatingPoint(t.storeInDetail.score)))]),s("div",{staticClass:"rating-text"},[t._v(t._s(t.getRatingText(t.storeInDetail.score)))])])]),s("b-card-body",{staticClass:"tags-body"},[s("div",{staticClass:"title"},[t._v("Tags")]),s("div",{staticClass:"tags-container"},t._l(t.storeInDetail.tag_list,function(e){return s("div",{key:e,staticClass:"tag",on:{click:function(s){s.stopPropagation(),t.replaceTag(e)}}},[t._v(t._s("#"+e))])}))])],1),s("b-card",{attrs:{"no-body":"no-body"}},[s("b-card-body",{staticClass:"reviews-title-body"},[s("div",{staticClass:"title"},[t._v("Reviews")])]),t._l(t.storeInDetail.review_list,function(e){return s("b-card-body",{key:e.date,staticClass:"reviews-content-body"},[s("div",{staticClass:"text"},[t._v(t._s(e.content))])])})],2)],1)],1):s("b-card",{staticClass:"empty-card",attrs:{"no-body":"no-body"}},[s("b-card-body",[t._v("Please select a store.")])],1)],1)])])])],1)},staticRenderFns:[]};var F=s("VU/8")(S,L,!1,function(t){s("OFb7")},"data-v-675573f7",null).exports;a.a.use(o.a);var D=new o.a({mode:"history",routes:[{path:"/",name:"Login",component:g},{path:"/signup",name:"SignUp",component:g},{path:"/search",name:"Search",component:F}]}),q=s("fZjL"),U=s.n(q),P=s("BO1k"),T=s.n(P),O=s("NYxO");a.a.use(O.a);var I={setState:function(t,e){var s=!0,a=!1,r=void 0;try{for(var i,n=T()(U()(e));!(s=(i=n.next()).done);s=!0){var o=i.value;t[o]=e[o]}}catch(t){a=!0,r=t}finally{try{!s&&n.return&&n.return()}finally{if(a)throw r}}}},R={getUser:function(){var t=$()(b.a.mark(function t(e,s){var a,r=e.commit;e.state;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={user_id:s},t.next=3,v.get("/user",{params:a}).then(function(t){var e=t.data.data;r("setState",{id:e.user_id,username:e.name,favorites:e.favorite_list})});case 3:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}(),getStoreListKeyword:function(){var t=$()(b.a.mark(function t(e,s){var a,r=e.commit;e.state;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={keyword:s},t.next=3,v.get("/store/list/keyword",{params:a}).then(function(t){var e=t.data.data;r("setState",{storeList:e})});case 3:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}(),getStoreListTag:function(){var t=$()(b.a.mark(function t(e,s){var a,r=e.commit;e.state;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={tag:s},t.next=3,v.get("/store/list/tag",{params:a}).then(function(t){var e=t.data.data;r("setState",{storeList:e})});case 3:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}(),getFavorites:function(){var t=$()(b.a.mark(function t(e,s){var a,r=e.commit;e.state;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={user_id:s},t.next=3,v.get("/user/favorite",{params:a}).then(function(t){var e=t.data.data;r("setState",{favorites:e})});case 3:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}(),addFavorite:function(t,e){t.commit,t.state;var s=t.dispatch;v.post("/user/favorite",f.a.stringify(e)).then(function(t){s("getFavorites",e.user_id)})},deleteFavorite:function(t,e){t.commit,t.state;var s=t.dispatch;v.delete("/user/favorite",{params:e}).then(function(t){s("getFavorites",e.user_id)})}},E=new O.a.Store({state:{id:null,username:"",favorites:null,storeList:null},mutations:I,actions:R});a.a.config.productionTip=!1,a.a.use(r.a),new a.a({el:"#app",router:D,store:E,components:{App:n},template:"<App/>"})},OFb7:function(t,e){},tk6D:function(t,e){},"wf/s":function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b6675d8f5a4d1ecfa8fb.js.map